#!/bin/bash

echo "ğŸ” Phase V Verification"
echo "======================="

# Check Kafka
echo "ğŸ“¦ Checking Kafka..."
docker-compose -f docker-compose.kafka.yml ps | grep -q "Up"
if [ $? -eq 0 ]; then
    echo "âœ… Kafka is running"
else
    echo "âŒ Kafka is not running"
fi

# Check Minikube
echo "â˜¸ï¸  Checking Minikube..."
minikube status | grep -q "Running"
if [ $? -eq 0 ]; then
    echo "âœ… Minikube is running"
else
    echo "âŒ Minikube is not running"
fi

# Check Dapr
echo "ğŸ”· Checking Dapr..."
kubectl get pods -n dapr-system | grep -q "Running"
if [ $? -eq 0 ]; then
    echo "âœ… Dapr is installed"
else
    echo "âŒ Dapr is not installed"
fi

# Check Application
echo "ğŸš€ Checking Application..."
kubectl get pods -n todo-app | grep -q "Running"
if [ $? -eq 0 ]; then
    echo "âœ… Application is deployed"
else
    echo "âŒ Application is not deployed"
fi

# Check Kafka Topics
echo "ğŸ“Š Checking Kafka Topics..."
docker exec kafka kafka-topics --list --bootstrap-server localhost:9092
if [ $? -eq 0 ]; then
    echo "âœ… Kafka topics exist"
else
    echo "âŒ Kafka topics missing"
fi

echo ""
echo "ğŸ¯ Summary:"
echo "- Kafka: http://localhost:8090"
echo "- Minikube Dashboard: minikube dashboard"
echo "- Application: kubectl get svc -n todo-app"

